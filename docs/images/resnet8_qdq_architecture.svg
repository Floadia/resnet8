<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: ResNet8_QDQ_Architecture Pages: 1 -->
<svg width="669pt" height="1009pt"
 viewBox="0.00 0.00 668.50 1009.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1005)">
<title>ResNet8_QDQ_Architecture</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1005 664.5,-1005 664.5,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_legend</title>
<polygon fill="#f0f0f0" stroke="black" points="101,-581 101,-936.5 265,-936.5 265,-581 101,-581"/>
<text text-anchor="middle" x="183" y="-921.3" font-family="Times,serif" font-size="14.00">QDQ Format Pattern</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_stats</title>
<polygon fill="#fff8dc" stroke="black" points="273,-833 273,-965 461,-965 461,-833 273,-833"/>
<text text-anchor="middle" x="367" y="-949.8" font-family="Times,serif" font-size="14.00">ResNet8 QDQ Statistics</text>
</g>
<!-- input -->
<g id="node1" class="node">
<title>input</title>
<polygon fill="#e0f0ff" stroke="black" points="91.5,-908 0.5,-908 0.5,-867 91.5,-867 91.5,-908"/>
<text text-anchor="middle" x="46" y="-896" font-family="Arial" font-size="10.00">Model Input</text>
<text text-anchor="middle" x="46" y="-885" font-family="Arial" font-size="10.00">(batch, 32, 32, 3)</text>
<text text-anchor="middle" x="46" y="-874" font-family="Arial" font-size="10.00">[FP32]</text>
</g>
<!-- q_input -->
<g id="node2" class="node">
<title>q_input</title>
<polygon fill="#90ee90" stroke="black" points="89,-728 3,-728 3,-676 89,-676 89,-728"/>
<text text-anchor="middle" x="46" y="-716" font-family="Arial" font-size="10.00">QuantizeLinear</text>
<text text-anchor="middle" x="46" y="-705" font-family="Arial" font-size="10.00">scale=1.000000</text>
<text text-anchor="middle" x="46" y="-694" font-family="Arial" font-size="10.00">zp=&#45;128</text>
<text text-anchor="middle" x="46" y="-683" font-family="Arial" font-size="10.00">[FP32 → INT8]</text>
</g>
<!-- input&#45;&gt;q_input -->
<g id="edge1" class="edge">
<title>input&#45;&gt;q_input</title>
<path fill="none" stroke="black" d="M46,-866.86C46,-836.18 46,-776.45 46,-738.2"/>
<polygon fill="black" stroke="black" points="49.5,-738.03 46,-728.03 42.5,-738.03 49.5,-738.03"/>
<text text-anchor="middle" x="57" y="-748.8" font-family="Arial" font-size="9.00">FP32</text>
</g>
<!-- layer1_dq -->
<g id="node7" class="node">
<title>layer1_dq</title>
<polygon fill="#ffb6c1" stroke="black" points="92,-627.5 0,-627.5 0,-591.5 92,-591.5 92,-627.5"/>
<text text-anchor="middle" x="46" y="-612.5" font-family="Arial" font-size="10.00">DequantizeLinear</text>
<text text-anchor="middle" x="46" y="-601.5" font-family="Arial" font-size="10.00">[INT8 → FP32]</text>
</g>
<!-- q_input&#45;&gt;layer1_dq -->
<g id="edge4" class="edge">
<title>q_input&#45;&gt;layer1_dq</title>
<path fill="none" stroke="black" d="M46,-675.79C46,-663.9 46,-649.69 46,-637.57"/>
<polygon fill="black" stroke="black" points="49.5,-637.57 46,-627.57 42.5,-637.57 49.5,-637.57"/>
<text text-anchor="middle" x="56" y="-650.8" font-family="Arial" font-size="9.00">INT8</text>
</g>
<!-- pattern_q -->
<g id="node3" class="node">
<title>pattern_q</title>
<polygon fill="#90ee90" stroke="black" points="202.5,-905.5 119.5,-905.5 119.5,-869.5 202.5,-869.5 202.5,-905.5"/>
<text text-anchor="middle" x="161" y="-890.5" font-family="Arial" font-size="10.00">QuantizeLinear</text>
<text text-anchor="middle" x="161" y="-879.5" font-family="Arial" font-size="10.00">(FP32 → INT8)</text>
</g>
<!-- pattern_dq -->
<g id="node4" class="node">
<title>pattern_dq</title>
<polygon fill="#ffb6c1" stroke="black" points="207,-720 115,-720 115,-684 207,-684 207,-720"/>
<text text-anchor="middle" x="161" y="-705" font-family="Arial" font-size="10.00">DequantizeLinear</text>
<text text-anchor="middle" x="161" y="-694" font-family="Arial" font-size="10.00">(INT8 → FP32)</text>
</g>
<!-- pattern_q&#45;&gt;pattern_dq -->
<g id="edge2" class="edge">
<title>pattern_q&#45;&gt;pattern_dq</title>
<path fill="none" stroke="black" d="M161,-869.24C161,-837.32 161,-768.87 161,-730.5"/>
<polygon fill="black" stroke="black" points="164.5,-730.08 161,-720.08 157.5,-730.08 164.5,-730.08"/>
<text text-anchor="middle" x="171" y="-748.8" font-family="Arial" font-size="9.00">INT8</text>
</g>
<!-- pattern_op -->
<g id="node5" class="node">
<title>pattern_op</title>
<polygon fill="#87ceeb" stroke="black" points="212,-630 110,-630 110,-589 212,-589 212,-630"/>
<text text-anchor="middle" x="161" y="-618" font-family="Arial" font-size="10.00">Operation</text>
<text text-anchor="middle" x="161" y="-607" font-family="Arial" font-size="10.00">(Conv, Add, etc.)</text>
<text text-anchor="middle" x="161" y="-596" font-family="Arial" font-size="10.00">[Operates on FP32]</text>
</g>
<!-- pattern_dq&#45;&gt;pattern_op -->
<g id="edge3" class="edge">
<title>pattern_dq&#45;&gt;pattern_op</title>
<path fill="none" stroke="black" d="M161,-683.98C161,-671.7 161,-654.8 161,-640.31"/>
<polygon fill="black" stroke="black" points="164.5,-640.28 161,-630.28 157.5,-640.28 164.5,-640.28"/>
<text text-anchor="middle" x="172" y="-650.8" font-family="Arial" font-size="9.00">FP32</text>
</g>
<!-- stats -->
<g id="node6" class="node">
<title>stats</title>
<polygon fill="lightgrey" stroke="transparent" points="433.5,-934 298.5,-934 298.5,-841 433.5,-841 433.5,-934"/>
<polygon fill="none" stroke="black" points="307,-912.5 307,-929.5 391,-929.5 391,-912.5 307,-912.5"/>
<text text-anchor="start" x="326" y="-919.5" font-family="Arial" font-weight="bold" font-size="10.00">Operation</text>
<polygon fill="none" stroke="black" points="391,-912.5 391,-929.5 426,-929.5 426,-912.5 391,-912.5"/>
<text text-anchor="start" x="394" y="-919.5" font-family="Arial" font-weight="bold" font-size="10.00">Count</text>
<polygon fill="none" stroke="black" points="307,-895.5 307,-912.5 391,-912.5 391,-895.5 307,-895.5"/>
<text text-anchor="start" x="316" y="-901.5" font-family="Arial" font-size="10.00">QuantizeLinear</text>
<polygon fill="none" stroke="black" points="391,-895.5 391,-912.5 426,-912.5 426,-895.5 391,-895.5"/>
<text text-anchor="start" x="403" y="-901.5" font-family="Arial" font-size="10.00">32</text>
<polygon fill="none" stroke="black" points="307,-878.5 307,-895.5 391,-895.5 391,-878.5 307,-878.5"/>
<text text-anchor="start" x="311" y="-884.5" font-family="Arial" font-size="10.00">DequantizeLinear</text>
<polygon fill="none" stroke="black" points="391,-878.5 391,-895.5 426,-895.5 426,-878.5 391,-878.5"/>
<text text-anchor="start" x="403" y="-884.5" font-family="Arial" font-size="10.00">66</text>
<polygon fill="none" stroke="black" points="307,-861.5 307,-878.5 391,-878.5 391,-861.5 307,-861.5"/>
<text text-anchor="start" x="311" y="-867.5" font-family="Arial" font-size="10.00">Total QDQ nodes</text>
<polygon fill="none" stroke="black" points="391,-861.5 391,-878.5 426,-878.5 426,-861.5 391,-861.5"/>
<text text-anchor="start" x="403" y="-867.5" font-family="Arial" font-size="10.00">98</text>
<polygon fill="none" stroke="black" points="307,-844.5 307,-861.5 391,-861.5 391,-844.5 307,-844.5"/>
<text text-anchor="start" x="310" y="-850.5" font-family="Arial" font-size="10.00">Total graph nodes</text>
<polygon fill="none" stroke="black" points="391,-844.5 391,-861.5 426,-861.5 426,-844.5 391,-844.5"/>
<text text-anchor="start" x="400.5" y="-850.5" font-family="Arial" font-size="10.00">130</text>
</g>
<!-- layer1_conv -->
<g id="node8" class="node">
<title>layer1_conv</title>
<polygon fill="#87ceeb" stroke="black" points="89,-543 3,-543 3,-507 89,-507 89,-543"/>
<text text-anchor="middle" x="46" y="-528" font-family="Arial" font-size="10.00">Conv2D</text>
<text text-anchor="middle" x="46" y="-517" font-family="Arial" font-size="10.00">[FP32 compute]</text>
</g>
<!-- layer1_dq&#45;&gt;layer1_conv -->
<g id="edge5" class="edge">
<title>layer1_dq&#45;&gt;layer1_conv</title>
<path fill="none" stroke="black" d="M46,-591.41C46,-580.34 46,-565.7 46,-553.08"/>
<polygon fill="black" stroke="black" points="49.5,-553.07 46,-543.07 42.5,-553.07 49.5,-553.07"/>
<text text-anchor="middle" x="57" y="-563.8" font-family="Arial" font-size="9.00">FP32</text>
</g>
<!-- layer1_q -->
<g id="node9" class="node">
<title>layer1_q</title>
<polygon fill="#90ee90" stroke="black" points="87.5,-461 4.5,-461 4.5,-425 87.5,-425 87.5,-461"/>
<text text-anchor="middle" x="46" y="-446" font-family="Arial" font-size="10.00">QuantizeLinear</text>
<text text-anchor="middle" x="46" y="-435" font-family="Arial" font-size="10.00">[FP32 → INT8]</text>
</g>
<!-- layer1_conv&#45;&gt;layer1_q -->
<g id="edge6" class="edge">
<title>layer1_conv&#45;&gt;layer1_q</title>
<path fill="none" stroke="black" d="M46,-506.64C46,-496.3 46,-482.94 46,-471.22"/>
<polygon fill="black" stroke="black" points="49.5,-471.05 46,-461.05 42.5,-471.05 49.5,-471.05"/>
<text text-anchor="middle" x="57" y="-481.8" font-family="Arial" font-size="9.00">FP32</text>
</g>
<!-- layer2_dq -->
<g id="node10" class="node">
<title>layer2_dq</title>
<polygon fill="#ffb6c1" stroke="black" points="92,-379 0,-379 0,-343 92,-343 92,-379"/>
<text text-anchor="middle" x="46" y="-364" font-family="Arial" font-size="10.00">DequantizeLinear</text>
<text text-anchor="middle" x="46" y="-353" font-family="Arial" font-size="10.00">[INT8 → FP32]</text>
</g>
<!-- layer1_q&#45;&gt;layer2_dq -->
<g id="edge7" class="edge">
<title>layer1_q&#45;&gt;layer2_dq</title>
<path fill="none" stroke="black" d="M46,-424.64C46,-414.3 46,-400.94 46,-389.22"/>
<polygon fill="black" stroke="black" points="49.5,-389.05 46,-379.05 42.5,-389.05 49.5,-389.05"/>
<text text-anchor="middle" x="56" y="-399.8" font-family="Arial" font-size="9.00">INT8</text>
</g>
<!-- layer2_op -->
<g id="node11" class="node">
<title>layer2_op</title>
<polygon fill="#87ceeb" stroke="black" points="83,-297 9,-297 9,-256 83,-256 83,-297"/>
<text text-anchor="middle" x="46" y="-285" font-family="Arial" font-size="10.00">...</text>
<text text-anchor="middle" x="46" y="-274" font-family="Arial" font-size="10.00">(more layers)</text>
<text text-anchor="middle" x="46" y="-263" font-family="Arial" font-size="10.00">[FP32]</text>
</g>
<!-- layer2_dq&#45;&gt;layer2_op -->
<g id="edge8" class="edge">
<title>layer2_dq&#45;&gt;layer2_op</title>
<path fill="none" stroke="black" d="M46,-342.91C46,-332.61 46,-319.22 46,-307.24"/>
<polygon fill="black" stroke="black" points="49.5,-307.18 46,-297.18 42.5,-307.18 49.5,-307.18"/>
<text text-anchor="middle" x="57" y="-317.8" font-family="Arial" font-size="9.00">FP32</text>
</g>
<!-- output_q -->
<g id="node12" class="node">
<title>output_q</title>
<polygon fill="#90ee90" stroke="black" points="87.5,-210 4.5,-210 4.5,-174 87.5,-174 87.5,-210"/>
<text text-anchor="middle" x="46" y="-195" font-family="Arial" font-size="10.00">QuantizeLinear</text>
<text text-anchor="middle" x="46" y="-184" font-family="Arial" font-size="10.00">[FP32 → INT8]</text>
</g>
<!-- layer2_op&#45;&gt;output_q -->
<g id="edge9" class="edge">
<title>layer2_op&#45;&gt;output_q</title>
<path fill="none" stroke="black" d="M46,-255.95C46,-245.3 46,-231.94 46,-220.28"/>
<polygon fill="black" stroke="black" points="49.5,-220.17 46,-210.17 42.5,-220.17 49.5,-220.17"/>
<text text-anchor="middle" x="57" y="-230.8" font-family="Arial" font-size="9.00">FP32</text>
</g>
<!-- output_dq -->
<g id="node13" class="node">
<title>output_dq</title>
<polygon fill="#ffb6c1" stroke="black" points="92,-128 0,-128 0,-87 92,-87 92,-128"/>
<text text-anchor="middle" x="46" y="-116" font-family="Arial" font-size="10.00">DequantizeLinear</text>
<text text-anchor="middle" x="46" y="-105" font-family="Arial" font-size="10.00">(final)</text>
<text text-anchor="middle" x="46" y="-94" font-family="Arial" font-size="10.00">[INT8 → FP32]</text>
</g>
<!-- output_q&#45;&gt;output_dq -->
<g id="edge10" class="edge">
<title>output_q&#45;&gt;output_dq</title>
<path fill="none" stroke="black" d="M46,-173.91C46,-163.61 46,-150.22 46,-138.24"/>
<polygon fill="black" stroke="black" points="49.5,-138.18 46,-128.18 42.5,-138.18 49.5,-138.18"/>
<text text-anchor="middle" x="56" y="-148.8" font-family="Arial" font-size="9.00">INT8</text>
</g>
<!-- output -->
<g id="node14" class="node">
<title>output</title>
<polygon fill="#ffe0e0" stroke="black" points="83.5,-41 8.5,-41 8.5,0 83.5,0 83.5,-41"/>
<text text-anchor="middle" x="46" y="-29" font-family="Arial" font-size="10.00">Model Output</text>
<text text-anchor="middle" x="46" y="-18" font-family="Arial" font-size="10.00">(batch, 10)</text>
<text text-anchor="middle" x="46" y="-7" font-family="Arial" font-size="10.00">[FP32]</text>
</g>
<!-- output_dq&#45;&gt;output -->
<g id="edge11" class="edge">
<title>output_dq&#45;&gt;output</title>
<path fill="none" stroke="black" d="M46,-86.79C46,-76.27 46,-63.12 46,-51.38"/>
<polygon fill="black" stroke="black" points="49.5,-51.11 46,-41.11 42.5,-51.11 49.5,-51.11"/>
<text text-anchor="middle" x="57" y="-61.8" font-family="Arial" font-size="9.00">FP32</text>
</g>
<!-- note -->
<g id="node15" class="node">
<title>note</title>
<polygon fill="#fffacd" stroke="black" points="654.5,-1001 469.5,-1001 469.5,-774 660.5,-774 660.5,-995 654.5,-1001"/>
<polyline fill="none" stroke="black" points="654.5,-1001 654.5,-995 "/>
<polyline fill="none" stroke="black" points="660.5,-995 654.5,-995 "/>
<text text-anchor="middle" x="565" y="-989" font-family="Arial" font-size="10.00">Scale and Zero&#45;Point Parameters</text>
<text text-anchor="middle" x="565" y="-954" font-family="Arial" font-size="10.00">Stored as initializers in ONNX graph.</text>
<text text-anchor="middle" x="565" y="-931" font-family="Arial" font-size="10.00">Each Q/DQ node references 2&#45;3 inputs:</text>
<text text-anchor="middle" x="565" y="-908" font-family="Arial" font-size="10.00"> &#160;1. Data tensor (from previous layer)</text>
<text text-anchor="middle" x="565" y="-885" font-family="Arial" font-size="10.00"> &#160;2. scale (FP32 initializer)</text>
<text text-anchor="middle" x="565" y="-862" font-family="Arial" font-size="10.00"> &#160;3. zero_point (INT8 initializer, optional)</text>
<text text-anchor="middle" x="565" y="-827" font-family="Arial" font-size="10.00">Example from this model:</text>
<text text-anchor="middle" x="565" y="-804" font-family="Arial" font-size="10.00"> &#160;QuantizeLinear nodes: 32</text>
<text text-anchor="middle" x="565" y="-781" font-family="Arial" font-size="10.00"> &#160;DequantizeLinear nodes: 66</text>
</g>
</g>
</svg>
